<div class="loyal-program-page">
  <div class="upload-file-table">
    <div class="header">
      <h2 mat-subheader>ატვირთული ფაილები</h2>
      <button matTooltip="გვერდის განახლება" mat-icon-button color="primary" (click)="getFiles()">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>

    <table mat-table [dataSource]="dataSource">

      <!-- File Name Column -->
      <ng-container matColumnDef="fileName">
        <th mat-header-cell *matHeaderCellDef> ფაილის სახელი</th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
      </ng-container>

      <!-- Upload Date Column -->
      <ng-container matColumnDef="uploadDate">
        <th mat-header-cell *matHeaderCellDef> ატვირთვის თარიღი</th>
        <td mat-cell *matCellDef="let element"> {{element.startTime | date: 'MMMM/d/yy, h:mm a'}} </td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> სტატუსი</th>
        <td mat-cell *matCellDef="let element"
            [ngStyle]="{'color' : element.status === 'Finished' ? 'green' :  element.status === 'Pending' ? 'orange' : 'red'}">
          {{element.status}}
        </td>
      </ng-container>

      <!-- Open Column -->
      <ng-container matColumnDef="open">
        <th mat-header-cell *matHeaderCellDef class="textCenter"> გახსნა</th>
        <td mat-cell *matCellDef="let element" class="textCenter">
          <button matTooltip="ჩანაწერების გახსნა" mat-icon-button color="primary" (click)="getFileTopUps(element)">
            <mat-icon> format_list_bulleted</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- Export Column -->
      <ng-container matColumnDef="export">
        <th mat-header-cell *matHeaderCellDef class="textCenter"> ექსპორტი</th>
        <td mat-cell *matCellDef="let element" class="textCenter">
          <button matTooltip="ჩანაწერის გადმოწერა" mat-icon-button color="primary" (click)="exportFile(element.id)">
            <mat-icon>open_in_new</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>
